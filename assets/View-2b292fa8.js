import{T as V}from"./TeacherList-594c2685.js";import{L}from"./TeacherList-d5fa4160.js";import{u as y}from"./UserInfo-4b7396db.js";import{_ as b,g as B,r as x,o as P,a as f,b as k,c as C,d as D,e as i,w as d,f as g}from"./index-6a3928da.js";const I={class:"greetings"},T={class:"notice-wrap"},A={__name:"View",props:{},setup(E){const w=B(),a=x({searchKey:"",list:V,map:new BMap.Map("container"),myLongitude:0,myLatitude:0,ak:"DwkPt9ifSC1skP60XOKVdKnD047AF30a",isVip:!1});P(()=>{a.isVip=v(),a.isVip||w.push({path:"/login"}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{const{longitude:s,latitude:e}=t.coords;console.log(s,e),a.myLongitude=s,a.myLatitude=e,M()},t=>{throw t.message})});const v=()=>{const t=localStorage.getItem("userPhone");return!!y.find(s=>s.id===t)},M=t=>{new BMap.Map("container").centerAndZoom(new BMap.Point(a.myLongitude,a.myLatitude),12);let e=new BMap.Geocoder;for(const o of a.list)e.getPoint(o.location,n=>{if(n){const{lng:c,lat:r}=n,{myLongitude:u,myLatitude:_}=a;Reflect.set(o,"distance",h(u,_,c,r)),o.distance=h(u,_,c,r)}else alert("您选择的地址没有解析到结果！")},"北京")},h=(t,s,e,o)=>{let n="";if(t!=null&&s!=null&&e!=null&&o!=null){e=e*1,o=o*1;let c=p(t),r=p(e),u=c-r,_=p(s)-p(o),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(u/2),2)+Math.cos(c)*Math.cos(r)*Math.pow(Math.sin(_/2),2)));l=l*6378.137,l=Math.round(l*1e4)/1e4;let m=l;m&&(parseInt(m)>=1?n=m.toFixed(1)+"km":n=m*1e3+"m")}return n},p=t=>t*Math.PI/180;return(t,s)=>{const e=f("van-swipe-item"),o=f("van-swipe"),n=f("van-notice-bar");return k(),C("div",I,[D("div",T,[i(n,{"left-icon":"volume-o",scrollable:!1},{default:d(()=>[i(o,{vertical:"",class:"notice-swipe",autoplay:4e3,"show-indicators":!1,scrollable:""},{default:d(()=>[i(e,null,{default:d(()=>[g("有需要合作推广的小姐姐，+Q 3483844719")]),_:1}),i(e,null,{default:d(()=>[g("🐺友兄弟一律zfb口令红包 +Q 3483844719")]),_:1}),i(e,null,{default:d(()=>[g("投放广告+Q 3483844719或点下方合作")]),_:1})]),_:1})]),_:1})]),i(L,{listData:a.list,isVip:a.isVip},null,8,["listData","isVip"])])}}},S=b(A,[["__scopeId","data-v-1c741c0b"]]);export{S as default};
