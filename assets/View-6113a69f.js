import{T as V}from"./TeacherList-3bbd6b56.js";import{L}from"./TeacherList-3ccbf903.js";import{u as y}from"./UserInfo-2014a600.js";import{f as b,r as B,q as x,a as f,o as P,c as k,b as C,d as i,w as d,e as h}from"./index-9dd452db.js";import{_ as D}from"./plugin-vueexport-helper-c27b6911.js";const I={class:"greetings"},T={class:"notice-wrap"},A={__name:"View",props:{},setup(E){const g=b(),a=B({searchKey:"",list:V,map:new BMap.Map("container"),myLongitude:0,myLatitude:0,ak:"DwkPt9ifSC1skP60XOKVdKnD047AF30a",isVip:!1});x(()=>{a.isVip=v(),a.isVip||g.push({path:"/login"}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{const{longitude:s,latitude:e}=t.coords;console.log(s,e),a.myLongitude=s,a.myLatitude=e,M()},t=>{throw t.message})});const v=()=>{const t=localStorage.getItem("userPhone");return!!y.find(s=>s.id===t)},M=t=>{new BMap.Map("container").centerAndZoom(new BMap.Point(a.myLongitude,a.myLatitude),12);let e=new BMap.Geocoder;for(const o of a.list)e.getPoint(o.location,n=>{if(n){const{lng:c,lat:r}=n,{myLongitude:u,myLatitude:_}=a;Reflect.set(o,"distance",w(u,_,c,r)),o.distance=w(u,_,c,r)}else alert("æ‚¨é€‰æ‹©çš„åœ°å€æ²¡æœ‰è§£æåˆ°ç»“æœï¼")},"åŒ—äº¬")},w=(t,s,e,o)=>{let n="";if(t!=null&&s!=null&&e!=null&&o!=null){e=e*1,o=o*1;let c=p(t),r=p(e),u=c-r,_=p(s)-p(o),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(u/2),2)+Math.cos(c)*Math.cos(r)*Math.pow(Math.sin(_/2),2)));l=l*6378.137,l=Math.round(l*1e4)/1e4;let m=l;m&&(parseInt(m)>=1?n=m.toFixed(1)+"km":n=m*1e3+"m")}return n},p=t=>t*Math.PI/180;return(t,s)=>{const e=f("van-swipe-item"),o=f("van-swipe"),n=f("van-notice-bar");return P(),k("div",I,[C("div",T,[i(n,{"left-icon":"volume-o",scrollable:!1},{default:d(()=>[i(o,{vertical:"",class:"notice-swipe",autoplay:4e3,"show-indicators":!1,scrollable:""},{default:d(()=>[i(e,null,{default:d(()=>[h("æœ‰éœ€è¦åˆä½œæ¨å¹¿çš„å°å§å§ï¼Œ+Q 3483844719")]),_:1}),i(e,null,{default:d(()=>[h("ğŸºå‹å…„å¼Ÿä¸€å¾‹zfbå£ä»¤çº¢åŒ… +Q 3483844719")]),_:1}),i(e,null,{default:d(()=>[h("æŠ•æ”¾å¹¿å‘Š+Q 3483844719æˆ–ç‚¹ä¸‹æ–¹åˆä½œ")]),_:1})]),_:1})]),_:1})]),i(L,{listData:a.list,isVip:a.isVip},null,8,["listData","isVip"])])}}},q=D(A,[["__scopeId","data-v-1c741c0b"]]);export{q as default};
